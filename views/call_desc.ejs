<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <title>calldesc</title>
</head>
<style>
    #callupdate {
        display: none;

    }

    #addcall {
        display: block;
    }
</style>

<body>
    <div class="container d-flex justify-content-md-center">
        <div>
            <h1 class="p-2">customer name <%-c_name%>
            </h1>

        </div>
    </div>
    <div class="container">

        <table class="table table-striped" id="calldesc">
            <thead class="bg-dark text-white">
                <tr>
                    <th scope="col">DESC id</th>
                    <th scope="col">Call date</th>
                    <th scope="col">Call Time</th>
                    <th scope="col">Call Desc</th>
                    <th scope="col">Call Motive</th>

                    <th scope="col">Call update</th>
                </tr>
            </thead>
            <tbody>



                <% if(typeof call !='undefined' ){ %>
                    <% call.forEach(i=>{ %>
                        <tr>
                            <th scope="row">
                                <%- i.call_id %>
                            </th>
                            <td>
                                <%- i.call_date %>
                            </td>
                            <td>
                                <%- i.call_time %>
                            </td>
                            <td>
                                <%- i.call_desc%>
                            </td>
                            <td>
                                <%- i.call_motive%>
                            </td>

                            <td><button onclick="callupdate(this)" class="btn btn-primary">update call</button></td>

                        </tr>



                        <%}); %>
                            <% } %>







            </tbody>
        </table>

        <form action="/emp/lead/callmanagement/calldesc/addcall" class="w-75 m-auto" id="addcall" method="POST">
            <div>
                <h1 class="text-center">Call Addcall to the customer</h1>
            </div>

            <div class="form-group p-3">
                <label>Customer Id <span class="star">*</span></label>
                <input type="text" value="<%- customer_id%>" readonly class="form-control" name="c_id"
                    id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter Customer Id">

            </div>




            <div class="form-group p-3">

                <label>Next Call Date <span class="star">*</span></label>
                <input type="date" name="calldate" id="calldata" class="form-control" aria-describedby="emailHelp"
                    required>

            </div>
            <div class="form-group p-3">
                <label> call Time <span class="star">*</span></label>
                <input type="time" class="form-control" id="calltime" name="calltime" id="exampleInputEmail1"
                    aria-describedby="emailHelp">

            </div>
            <div class="form-group p-3">
                <label>Call Desc<span class="star">*</span></label>
                <input type="text" name="calldesc" id="calldesc" class="form-control" id="exampleInputEmail1"
                    aria-describedby="emailHelp" placeholder="Enter desc about the call" required>

            </div>

            <div class="form-group p-3">
                <label>Call motive<span class="star">*</span></label>
                <input type="text" name="callmotive" id="calldesc" class="form-control" id="exampleInputEmail1"
                    aria-describedby="emailHelp" placeholder="Enter desc about the call" required>

            </div>


            <div class="form-group p-3">
                <input type="submit" class="form-control p-2 bg-primary text-white" id="exampleInputPassword1"
                    value="Submit">
            </div>

        </form>



        <form action="/emp/lead/callmanagement/calldesc/callupdate" class="w-75 m-auto" id="callupdate" method="POST">
            <div>
                <h1 class="text-center">Call Update</h1>
            </div>

            <div class="form-group p-3">
                <label>Customer Id <span class="star">*</span></label>
                <input type="text" value="<%- customer_id%>" readonly class="form-control" name="c_id"
                    id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter Customer Id">

            </div>


            <div class="form-group p-3">
                <label>call Id <span class="star">*</span></label>
                <input type="text" readonly class="form-control" id="callid" name="call_id" id="exampleInputEmail1"
                    aria-describedby="emailHelp" placeholder="Enter Customer Id">

            </div>

            <div class="form-group p-3">

                <label>Next Call Date <span class="star">*</span></label>
                <input type="date" name="call_date" id="calldata" class="form-control" aria-describedby="emailHelp"
                    required>

            </div>
            <div class="form-group p-3">
                <label> call Time <span class="star">*</span></label>
                <input type="time" class="form-control" id="calltime" name="call_time" id="exampleInputEmail1"
                    aria-describedby="emailHelp">

            </div>
            <div class="form-group p-3">
                <label>Call Desc<span class="star">*</span></label>
                <input type="text" name="call_desc" id="calldesc" class="form-control" id="exampleInputEmail1"
                    aria-describedby="emailHelp" placeholder="Enter desc about the call" required>

            </div>
            <div class="form-group p-3">
                <label>Call motive<span class="star">*</span></label>
                <input type="text" name="call_motive" id="calldesc" class="form-control" id="exampleInputEmail1"
                    aria-describedby="emailHelp" placeholder="Enter desc about the call" required>

            </div>


            <div class="form-group p-3">
                <input type="submit" class="form-control p-2 bg-primary text-white" id="exampleInputPassword1"
                    value="Submit">
            </div>

        </form>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"
        integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js"
        integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj"
        crossorigin="anonymous"></script>

    <script>
        function callupdate(btn) {
            const dc = document.querySelector('#callupdate')
            dc.style.display = 'block';

            let parent = btn.parentElement.parentElement;
            let call_id = parent.children[0].innerText;
            let call_date = parent.children[1].innerText;
            let call_time = parent.children[2].innerText;
            let call_desc = parent.children[3].innerText;
            let callid = document.querySelector('#callid');
            let calldate = document.querySelector('#calldate');
            let calltime = document.querySelector('#calltime');
            let calldesc = document.querySelector('#calldesc');
            callid.value = call_id;
            calldate.value = call_date;
            calltime.value = call_time;
            calldesc.value = call_desc



        }
    </script>



</body>

</html>